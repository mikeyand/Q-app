
<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<head>
<title>Using turn.js and the new zoom feature</title>
<meta name="viewport" content="width = 1050, user-scalable = no" />
<script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
<script type="text/javascript" src="extras/modernizr.2.5.3.min.js"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="lib/hash.js"></script>
<script type="text/javascript" src="lib/remodal.js"></script>
<script type="text/javascript" src="extras/jquery-play-sound.js"></script>

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="css/remodal-default-theme.css" rel="stylesheet" type="text/css">
<link href="css/remodal.css" rel="stylesheet" type="text/css">

<script>
  $(document).ready(function(){

      var toggleState = true;
      $('.q-text').on("click", function() {
        if(toggleState) {
          $('.region').fadeIn();
        } else {
          $('.region').fadeOut();
        }
        toggleState = !toggleState;
      });

  });
</script>

</head>
<body>

<div id="canvas" class="remodal-bg">
  <div class="button-container">
    <button type="button" class="btn btn-default home">
      <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
    </button>
    <button type="button" class="btn btn-default q-text" data-toggle="button" aria-pressed="false" autocomplete="off">
      <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
    </button>
    <button type="button" class="btn btn-default zoom-icon-in zoom-icon">
      <span class="glyphicon glyphicon-resize-full" aria-hidden="true"></span>
    </button>
  </div>

<div class="zoom-icon zoom-icon-in"></div>

<div class="magazine-viewport">
	<div class="container">
		<div class="magazine">
			<!-- Next button -->
			<!-- <div ignore="1" class="next-button"></div> -->
			<!-- Previous button -->
			<!-- <div ignore="1" class="previous-button"></div> -->
		</div>
	</div>
</div>
</div>



<!-- Thumbnails -->
<div class="thumbnails">
	<div class="container">
	<div class="row">
    <div class="remodal" data-remodal-id="modal1" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Marginal Medallion</h2>
      <p>Inscribed with the word “two hundred,” this illuminated roundel indicates that the reader has reached the two hundredth verse of the chapter. The Qur’anic text is written in Arabic, which reads from right to left.</p>
    </div>
    <div class="remodal" data-remodal-id="modal2" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>IKufic Script</h2>
			<p>The text is copied in an angular script known as kufic. It is based on a strict geometric structure, which allows the calligrapher to elongate horizontal elements for dramatic effect.</p>
    </div>
    <div class="remodal" data-remodal-id="modal3" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Parchment</h2>
			<p>This Qur’an was written on parchment, most likely made from sheepskin. As each page measures 24.5 x 33 cm, one animal skin would have created only about six pages, making the manuscript extremely expensive.</p>
    </div>
    <div class="remodal" data-remodal-id="modal4" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Verse Marker</h2>
			<p>Small gilded rosettes mark the separation between verses in a chapter (sura). There are around 6,240 verses and 114 chapters in the Qur’an.</p>
    </div>
    <div class="remodal" data-remodal-id="modal5" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Justification</h2>
			<p>Here, the calligrapher carefully transcribed the text in five neat lines of equal length. The text is bordered on three sides by wide margins, which protect it but also required additional sheets of parchment.</p>
    </div>
    <div class="remodal" data-remodal-id="modal6" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Parchment</h2>
			<p>Parchment is made from the skin of a sheep, goat, cow, camel, or gazelle. After soaking the skin in a lime or date solution, the parchment maker would have scraped off any remaining flesh and hair and stretched the skin on a wooden frame to dry it into stiff sheets. Finally, the skin would be sanded with a pumice stone and rubbed with chalk to create a smooth white surface for writing.</p>
    </div>
    <div class="remodal" data-remodal-id="modal7" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Faded Text</h2>
			<p>This side of the sheet once faced the animal’s internal organs, so it is often called the “flesh side.” Compared to the opposite side—known as the “hair side”—this one is often whiter in color, smoother to the touch, and sometimes shinier. As it also tends to be oilier, the flesh side does not preserve ink as well as the hair side does.</p>
    </div>
    <div class="remodal" data-remodal-id="modal8" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Parchment</h2>
			<p>The skin’s hair side creates parchment sheets that are yellower and less smooth than the flesh-side ones. Hair-side pages also are better at preserving the ink. Sometimes, it’s possible to see remaining hair follicles on the surface.</p>
    </div>
    <div class="remodal" data-remodal-id="modal9" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Calligraphy</h2>
			<p>The calligrapher cleverly manipulated strokes, extending and contracting horizontal elements to create stunning visual effects. Here, the second letter of the word fi (in) is pulled backward in one long stroke. Two lines down, the calligrapher wrote the same word, this time with tight curves.</p>
    </div>
    <div class="remodal" data-remodal-id="modal10" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Calligraphy</h2>
			<p>Here, the curves of the word fi (in) differ dramatically from the elongated, flowing version above. The difference in form reveals the calligrapher’s skill.</p>
    </div>
    <div class="remodal" data-remodal-id="modal11" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Verse Marker</h2>
			<p>This gold symbol marks every fifth verse. It denotes that the reader has reached verse 205.</p>
    </div>
    <div class="remodal" data-remodal-id="modal12" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Short Vowel</h2>
			<p>Arabic has no letters to represent short vowels. Small red dots signify these sounds to help readers avoid mistakes when reciting the text. A dot above the letter indicates the short “a” sound, as heard in the word hat.</p>
    </div>
    <div class="remodal" data-remodal-id="modal13" data-remodal-options="hashTracking: false">
      <button data-remodal-action="close" class="remodal-close"></button>
      <h2>Short Vowel</h2>
			<p>This dot below the letter indicates the short “i” sound, as heard in the world bit.</p>
    </div>


	</div>
</div>

<script type="text/javascript">

function loadApp() {

 	$('#canvas').fadeIn(1000);

 	var flipbook = $('.magazine');

 	// Check if the CSS was already loaded

	if (flipbook.width()==0 || flipbook.height()==0) {
		setTimeout(loadApp, 10);
		return;
	}

	// Create the flipbook

	flipbook.turn({

			// Magazine width

			width: 1200,

			// Magazine height

			height: 446,

			// Duration in millisecond

			duration: 1000,

			// Hardware acceleration

			acceleration: !isChrome(),

			// Enables gradients

			gradients: true,

			// Auto center this flipbook

			autoCenter: true,

			// Elevation from the edge of the flipbook when turning a page

			elevation: 10,

			// The number of pages

			pages: 7,

			// Direction

			direction: "rtl",

			option: 2,

			// Events

			when: {
        start: function(event, pageObject, corner) {
          if (pageObject.next==1)
            event.preventDefault();
        },
				turning: function(event, page, view) {
          $.playSound("page-flip-03");
          if (page==1)
          event.preventDefault();

					var book = $(this),
					currentPage = book.turn('page'),
					pages = book.turn('pages');

					// Update the current URI

					Hash.go('page/' + page).update();

					// Show and hide navigation buttons

					disableControls(page);


					$('.thumbnails .page-'+currentPage).
						parent().
						removeClass('current');

					$('.thumbnails .page-'+page).
						parent().
						addClass('current');



				},

				turned: function(event, page, view) {

					disableControls(page);

					$(this).turn('center');

					// if (page==1) {
					// 	$(this).turn('peel', 'br');
					// }

				},

				missing: function (event, pages) {

					// Add pages that aren't in the magazine

					for (var i = 0; i < pages.length; i++)
						addPage(pages[i], $(this));

				}
			}

	});

	// Zoom.js

	$('.magazine-viewport').zoom({
		flipbook: $('.magazine'),

		max: function() {

			return largeMagazineWidth()/$('.magazine').width();

		},

		when: {

			swipeLeft: function() {

				$(this).zoom('flipbook').turn('next');

			},

			swipeRight: function() {

				$(this).zoom('flipbook').turn('previous');

			},

			resize: function(event, scale, page, pageElement) {

				if (scale==1)
					loadSmallPage(page, pageElement);
				else
					loadLargePage(page, pageElement);

			},

			zoomIn: function () {

				$('.thumbnails').hide();
				$('.made').hide();
				$('.magazine').removeClass('animated').addClass('zoom-in');
				$('.zoom-icon').removeClass('zoom-icon-in').addClass('zoom-icon-out');

				if (!window.escTip && !$.isTouch) {
					escTip = true;

					$('<div />', {'class': 'exit-message'}).
						html('<div>Press ESC to exit</div>').
							appendTo($('body')).
							delay(2000).
							animate({opacity:0}, 500, function() {
								$(this).remove();
							});
				}
			},

			zoomOut: function () {

				$('.exit-message').hide();
				$('.thumbnails').fadeIn();
				$('.made').fadeIn();
				$('.zoom-icon').removeClass('zoom-icon-out').addClass('zoom-icon-in');

				setTimeout(function(){
					$('.magazine').addClass('animated').removeClass('zoom-in');
					resizeViewport();
				}, 0);

			}
		}
	});

	// Zoom event

	if ($.isTouch)
		$('.magazine-viewport').bind('zoom.doubleTap', zoomTo);
	else
		$('.magazine-viewport').bind('zoom.tap', zoomTo);


	// Using arrow keys to turn the page

	$(document).keydown(function(e){

		var previous = 37, next = 39, esc = 27;

		switch (e.keyCode) {
			case previous:

				// left arrow
				$('.magazine').turn('previous');
				e.preventDefault();

			break;
			case next:

				//right arrow
				$('.magazine').turn('next');
				e.preventDefault();

			break;
			case esc:

				$('.magazine-viewport').zoom('zoomOut');
				e.preventDefault();

			break;
		}
	});

	// URIs - Format #/page/1

	Hash.on('^page\/([0-9]*)$', {
		yep: function(path, parts) {
			var page = parts[1];

			if (page!==undefined) {
				if ($('.magazine').turn('is'))
					$('.magazine').turn('page', page);
			}

		},
		nop: function(path) {

			if ($('.magazine').turn('is'))
				$('.magazine').turn('page', 1);
		}
	});


	$(window).resize(function() {
		resizeViewport();
	}).bind('orientationchange', function() {
		resizeViewport();
	});

	// Events for thumbnails

	$('.thumbnails').click(function(event) {

		var page;

		if (event.target && (page=/page-([0-9]+)/.exec($(event.target).attr('class'))) ) {

			$('.magazine').turn('page', page[1]);
		}
	});

	$('.thumbnails li').
		bind($.mouseEvents.over, function() {

			$(this).addClass('thumb-hover');

		}).bind($.mouseEvents.out, function() {

			$(this).removeClass('thumb-hover');

		});

	if ($.isTouch) {

		$('.thumbnails').
			addClass('thumbanils-touch').
			bind($.mouseEvents.move, function(event) {
				event.preventDefault();
			});

	} else {

		$('.thumbnails ul').mouseover(function() {

			$('.thumbnails').addClass('thumbnails-hover');

		}).mousedown(function() {

			return false;

		}).mouseout(function() {

			$('.thumbnails').removeClass('thumbnails-hover');

		});

	}


	// Regions

	if ($.isTouch) {
		$('.magazine').bind('touchstart', regionClick);
	} else {
		$('.magazine').click(regionClick);
	}

	// Events for the next button

	$('.next-button').bind($.mouseEvents.over, function() {

		$(this).addClass('next-button-hover');

	}).bind($.mouseEvents.out, function() {

		$(this).removeClass('next-button-hover');

	}).bind($.mouseEvents.down, function() {

		$(this).addClass('next-button-down');

	}).bind($.mouseEvents.up, function() {

		$(this).removeClass('next-button-down');

	}).click(function() {

		$('.magazine').turn('next');

	});

	// Events for the next button

	$('.previous-button').bind($.mouseEvents.over, function() {

		$(this).addClass('previous-button-hover');

	}).bind($.mouseEvents.out, function() {

		$(this).removeClass('previous-button-hover');

	}).bind($.mouseEvents.down, function() {

		$(this).addClass('previous-button-down');

	}).bind($.mouseEvents.up, function() {

		$(this).removeClass('previous-button-down');

	}).click(function() {

		$('.magazine').turn('previous');

	});


	resizeViewport();

	$('.magazine').addClass('animated');

}

// Zoom icon

 $('.zoom-icon').bind('mouseover', function() {

 	if ($(this).hasClass('zoom-icon-in'))
 		$(this).addClass('zoom-icon-in-hover');

 	if ($(this).hasClass('zoom-icon-out'))
 		$(this).addClass('zoom-icon-out-hover');

 }).bind('mouseout', function() {

 	 if ($(this).hasClass('zoom-icon-in'))
 		$(this).removeClass('zoom-icon-in-hover');

 	if ($(this).hasClass('zoom-icon-out'))
 		$(this).removeClass('zoom-icon-out-hover');

 }).bind('click', function() {

 	if ($(this).hasClass('zoom-icon-in'))
 		$('.magazine-viewport').zoom('zoomIn');
 	else if ($(this).hasClass('zoom-icon-out'))
		$('.magazine-viewport').zoom('zoomOut');

 });

 $('#canvas').hide();


// Load the HTML4 version if there's not CSS transform

yepnope({
	test : Modernizr.csstransforms,
	yep: ['lib/turn.js'],
	nope: ['lib/turn.html4.min.js'],
	both: ['lib/zoom.min.js', 'js/magazine.js', 'css/magazine.css'],
	complete: loadApp
});
setTimeout(function(){
  $('.region.text-one').attr("data-remodal-target", "modal1");
  $('.region.text-two').attr("data-remodal-target", "modal2");
  $('.region.text-three').attr("data-remodal-target", "modal3");
  $('.region.text-four').attr("data-remodal-target", "modal4");
  $('.region.text-five').attr("data-remodal-target", "modal5");
  $('.region.text-six').attr("data-remodal-target", "modal6");
  $('.region.text-seven').attr("data-remodal-target", "modal7");
  $('.region.text-eight').attr("data-remodal-target", "modal8");
  $('.region.text-nine').attr("data-remodal-target", "modal9");
  $('.region.text-ten').attr("data-remodal-target", "modal10");
  $('.region.text-eleven').attr("data-remodal-target", "modal11");
  $('.region.text-twelve').attr("data-remodal-target", "modal12");
  $('.region.text-thirteen').attr("data-remodal-target", "modal13");

}, 500);




</script>

</body>
</html>
